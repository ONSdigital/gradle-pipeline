ext {
    versionDeliminter='.'
    versionFile='version.txt'
}

def getVersion = rootProject.file(versionFile).text.split('=').last().trim()
version = getVersion

task bumpMajor {
    doLast {
        def (majorStr, minorStr) = version.tokenize(versionDeliminter)
        int bumpedMajor = (majorStr as Integer) + 1
        String withNewMajor = bumpedMajor + versionDeliminter + minorStr
        version = withNewMajor
        new File("$projectDir/version.txt").text = "version=${version}"
        println "Bumped major [${majorStr}.${minorStr}] to [${version}]"
    }
}

task bumpMinor {
    doLast {
        def (majorStr, minorStr) = version.tokenize(versionDeliminter)
        int bumpedMinor = (minorStr as Integer) + 1
        String withNewMinor = majorStr + versionDeliminter + bumpedMinor
        version = withNewMinor
        new File("$projectDir/version.txt").text = "version=${version}"
        println "Bumped minor [${majorStr}.${minorStr}] to [${version}]"
    }
}

task version {
    doLast {
        println "Current version [${version}]"
    }
}